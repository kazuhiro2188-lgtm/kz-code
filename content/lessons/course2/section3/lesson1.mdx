# DDDの基礎概念

## はじめに

このレッスンでは、**ドメイン駆動設計（DDD: Domain-Driven Design）**の基礎概念について学びます。

## DDDとは

**ドメイン駆動設計**は、Eric Evansが提唱したソフトウェア設計手法です。複雑なビジネスロジックを扱う際に、ドメイン（ビジネスの領域）を中心に設計を行うことを重視します。

### 主な特徴

- **ドメイン中心**: ビジネスロジックを中心に設計
- **ユビキタス言語**: 開発者とビジネス担当者が共通の言語を使用
- **境界づけられたコンテキスト**: ドメインを適切に分割

## ドメインとは

**ドメイン**とは、ソフトウェアが解決しようとする問題領域のことです。

**例:**
- ECサイト: 商品管理、注文処理、決済
- 予約システム: 予約管理、空き状況管理、キャンセル処理
- AI開発プラットフォーム: プロンプト管理、コード生成、実行管理

## ユビキタス言語

**ユビキタス言語**は、ドメイン内で使用される共通の言語です。

**特徴:**
- 開発者とビジネス担当者が同じ言葉を使用
- コード内でも同じ用語を使用
- ドメインの概念を正確に表現

**例:**
- 「ユーザー」ではなく「会員」
- 「削除」ではなく「退会」
- 「保存」ではなく「登録」

## エンティティと値オブジェクト

### エンティティ（Entity）

識別子を持ち、時間が経っても同一性を保つオブジェクトです。

**特徴:**
- 一意の識別子（ID）を持つ
- 時間が経っても同一性を保つ
- 属性が変わっても同じエンティティ

**例:**
```typescript
class User {
  constructor(
    public readonly id: string,
    public name: string,
    public email: string
  ) {}
}
```

### 値オブジェクト（Value Object）

識別子を持たず、属性の値によって同一性が決まるオブジェクトです。

**特徴:**
- 識別子を持たない
- 不変（イミュータブル）
- 属性の値で比較

**例:**
```typescript
class Email {
  constructor(public readonly value: string) {
    if (!this.isValid(value)) {
      throw new Error('Invalid email');
    }
  }
  
  private isValid(email: string): boolean {
    return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
  }
}
```

## まとめ

- **DDD**はドメインを中心に設計する手法
- **ユビキタス言語**により、開発者とビジネス担当者が共通の理解を持つ
- **エンティティ**と**値オブジェクト**でドメインモデルを表現
