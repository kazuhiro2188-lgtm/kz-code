# パーソナライズド学習機能の動作確認ガイド

## 確認日
2026年2月8日

## 実装内容

### 1. 理解度データ管理
- レッスン完了時の理解度をメモリ内で保存
- 復習推奨レッスンIDの取得機能

### 2. パーソナライズド学習サービス
- 理解度に基づく復習推奨レッスンの取得
- 学習パス提案機能（基本実装）

### 3. ダッシュボード統合
- 復習推奨レッスンセクションの追加
- 理解度が低いレッスンの自動表示

## 動作確認手順

### ステップ1: 開発サーバーの起動確認

```bash
# 開発サーバーが起動していることを確認
# ポート3002で動作していることを確認
```

### ステップ2: レッスン完了と理解度選択

1. **ダッシュボードにアクセス**
   - URL: `http://localhost:3002/dashboard`
   - コース一覧が表示されることを確認

2. **レッスンページに移動**
   - 任意のコースを選択
   - セクションを選択
   - レッスンを選択

3. **レッスンを完了**
   - レッスンコンテンツを確認
   - 「レッスンを完了する」ボタンをクリック

4. **理解度を選択**
   - 理解度選択モーダルが表示されることを確認
   - 以下の理解度から選択：
     - 🌟 よく理解できた（復習推奨なし）
     - ✅ まあまあ理解できた（復習推奨なし）
     - 🤔 あまり理解できなかった（復習推奨あり）
     - 📚 ほとんど理解できなかった（復習推奨あり）

5. **復習推奨メッセージの確認**
   - 「あまり理解できなかった」または「ほとんど理解できなかった」を選択した場合
   - 復習推奨メッセージが表示されることを確認

### ステップ3: ダッシュボードでの復習推奨レッスン確認

1. **ダッシュボードに戻る**
   - レッスン完了後、ダッシュボードに戻る
   - URL: `http://localhost:3002/dashboard`

2. **復習推奨レッスンセクションの確認**
   - 「復習推奨レッスン」セクションが表示されることを確認
   - 理解度が低いレッスンが一覧表示されることを確認

3. **復習推奨レッスンの内容確認**
   - 各レッスンカードに以下が表示されることを確認：
     - レッスンタイトル
     - 復習推奨理由
     - 完了日時
     - 理解度アイコン（🤔 または 📚）

4. **レッスンへの遷移確認**
   - 復習推奨レッスンをクリック
   - 該当レッスンページに遷移することを確認

### ステップ4: 複数レッスンの理解度選択と確認

1. **複数のレッスンを完了**
   - 異なる理解度で複数のレッスンを完了
   - 例：
     - レッスン1: 「よく理解できた」
     - レッスン2: 「あまり理解できなかった」
     - レッスン3: 「ほとんど理解できなかった」

2. **ダッシュボードでの確認**
   - 復習推奨レッスンセクションに、理解度が低いレッスンのみが表示されることを確認
   - 「よく理解できた」レッスンは表示されないことを確認

3. **表示順序の確認**
   - 復習推奨レッスンは完了日時の新しい順に表示されることを確認

## 期待される動作

### ✅ 正常動作

1. **理解度選択**
   - レッスン完了時に理解度選択モーダルが表示される
   - 4つの理解度から選択できる
   - 選択後、モーダルが閉じる

2. **復習推奨メッセージ**
   - 理解度が低い場合（fair/poor）、復習推奨メッセージが表示される
   - 理解度が高い場合（excellent/good）、復習推奨メッセージは表示されない

3. **ダッシュボード表示**
   - 理解度が低いレッスンのみが復習推奨レッスンとして表示される
   - レッスンカードに適切な情報が表示される
   - クリックでレッスンページに遷移できる

### ❌ 問題が発生する可能性のあるケース

1. **理解度が保存されない**
   - ブラウザをリロードすると、メモリ内のデータが消える
   - これは正常な動作（認証無効化のため）

2. **復習推奨レッスンが表示されない**
   - 理解度が低いレッスンを完了していない場合
   - すべてのレッスンで理解度が高い場合

## トラブルシューティング

### 問題1: 復習推奨レッスンが表示されない

**原因:**
- 理解度が低いレッスンを完了していない
- ブラウザをリロードしてメモリ内のデータが消えた

**解決方法:**
- 理解度が低いレッスンを再度完了する
- 「あまり理解できなかった」または「ほとんど理解できなかった」を選択する

### 問題2: 理解度選択モーダルが表示されない

**原因:**
- JavaScriptエラーが発生している可能性

**解決方法:**
- ブラウザのコンソールを確認
- エラーメッセージを確認

### 問題3: レッスン完了ボタンが動作しない

**原因:**
- Server Actionのエラー

**解決方法:**
- ブラウザのコンソールを確認
- サーバーログを確認

## 確認項目チェックリスト

- [ ] レッスン完了時に理解度選択モーダルが表示される
- [ ] 4つの理解度から選択できる
- [ ] 理解度が低い場合、復習推奨メッセージが表示される
- [ ] ダッシュボードに「復習推奨レッスン」セクションが表示される
- [ ] 理解度が低いレッスンのみが表示される
- [ ] レッスンカードに適切な情報が表示される
- [ ] レッスンカードをクリックしてレッスンページに遷移できる
- [ ] 複数のレッスンで動作確認できる
- [ ] ブラウザをリロードするとデータがリセットされる（正常動作）

## 次のステップ

動作確認が完了したら：
1. 問題があれば修正
2. データベース統合（認証再有効化時）
3. 学習パス提案機能の拡張
