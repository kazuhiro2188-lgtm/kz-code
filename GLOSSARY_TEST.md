# 用語解説機能の動作確認ガイド

## 確認手順

### 1. レッスンページにアクセス

以下のURLにアクセスしてください：

```
http://localhost:3000/courses/course-infrastructure-basics/sections/section-infrastructure-fundamentals/lessons/lesson-infrastructure-overview
```

### 2. 確認すべきポイント

#### ✅ 用語のアンダーライン表示
以下の用語に**点線のアンダーライン**が表示されることを確認：

- **インフラストラクチャ**（または**インフラ**）
- **サーバー**
- **コンテナ**
- **Docker**
- **Kubernetes**
- **スケーラビリティ**
- **可用性**

#### ✅ ホバー時の動作
- マウスをアンダーライン上に置くと、点線が実線に変わることを確認
- カーソルが`help`（？マーク）に変わることを確認

#### ✅ クリック/タップ時の動作
- 用語をクリック/タップすると、ポップアップが表示されることを確認
- ポップアップに以下が表示されることを確認：
  - 用語名（太字）
  - 読み方（あれば）
  - カテゴリバッジ（例: "インフラ"）
  - 説明文
- ポップアップの「×」ボタンで閉じられることを確認
- ポップアップ外をクリックで閉じられることを確認
- ESCキーで閉じられることを確認

#### ✅ キーボード操作
- Tabキーで用語にフォーカスできることを確認
- EnterキーまたはSpaceキーでポップアップが開くことを確認
- ESCキーでポップアップが閉じることを確認

### 3. テスト用MDXコンテンツ

`content/lessons/course1/section1/lesson1.mdx`には以下の用語が含まれています：

- インフラストラクチャ（インフラ）
- サーバー
- コンテナ
- Docker
- Kubernetes
- スケーラビリティ
- 可用性

これらの用語が自動的に検出され、アンダーラインが表示されるはずです。

## トラブルシューティング

### 用語が検出されない場合

1. **ブラウザのコンソールでエラーを確認**
   - F12キーで開発者ツールを開く
   - Consoleタブでエラーがないか確認

2. **MDXシリアライズの確認**
   - サーバーサイドのログを確認
   - `lib/mdx/serializer.ts`の`detectGlossaryTerms`メソッドが正しく動作しているか確認

3. **用語データの確認**
   - `lib/data/glossary.ts`に用語が正しく定義されているか確認
   - 用語名やエイリアスが正確か確認

### ポップアップが表示されない場合

1. **コンポーネントのインポート確認**
   - `components/mdx/MDXRenderer.tsx`で`GlossaryTerm`が正しくインポートされているか確認
   - `components`オブジェクトに`GlossaryTerm`が登録されているか確認

2. **z-indexの確認**
   - ポップアップの`z-index`が適切か確認（現在は`z-50`）
   - 他の要素に隠れていないか確認

3. **位置計算の確認**
   - ポップアップの位置が画面外に出ていないか確認
   - `components/glossary/GlossaryTerm.tsx`の位置計算ロジックを確認

### スタイリングの問題

1. **アンダーラインが表示されない**
   - Tailwind CSSのクラスが正しく適用されているか確認
   - `decoration-dotted`、`decoration-blue-500`が適用されているか確認

2. **ポップアップのスタイルが崩れている**
   - `components/glossary/GlossaryTerm.tsx`のスタイルクラスを確認
   - ダークモード対応が正しく動作しているか確認

## 期待される動作

### 正常な動作例

1. **テキスト内の用語検出**
   ```mdx
   このレッスンでは、**インフラストラクチャ**の基礎について学びます。
   ```
   → 「インフラストラクチャ」にアンダーラインが表示される

2. **エイリアスでの検出**
   ```mdx
   **インフラ**について学びます。
   ```
   → 「インフラ」にアンダーラインが表示され、クリックすると「インフラストラクチャ」の説明が表示される

3. **コードブロック内は検出されない**
   ```mdx
   ```bash
   docker run hello-world
   ```
   ```
   → コードブロック内の「docker」は検出されない（正しい動作）

## 次のステップ

動作確認が完了したら、以下を実施：

1. **追加の用語を定義**
   - `lib/data/glossary.ts`に必要な用語を追加

2. **MDXコンテンツの作成**
   - 各レッスンのMDXファイルに用語を含める
   - 用語は自動検出されるため、特別な記法は不要

3. **パフォーマンスの最適化**
   - 大量の用語がある場合の検出パフォーマンスを確認
   - 必要に応じて最適化を実施
